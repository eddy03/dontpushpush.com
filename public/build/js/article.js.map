{"version":3,"sources":["article.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"article.js","sourcesContent":["$(document).ready(function() {\r\n\r\n    //Add active navigation class\r\n    $('.topnavigation li:first').addClass('active');\r\n\r\n    //add tooltip\r\n    $('[data-toggle=\"tooltip\"]').tooltip();\r\n    $('.preview-button').tooltip();\r\n\r\n    //Autosize init\r\n    autosize($('[name=\"markdowneditor\"]'));\r\n\r\n    //Tags selectize init\r\n    $('[name=\"tags\"]').selectize({\r\n        delimiter: ',',\r\n        persist: false,\r\n        create: function(input) {\r\n            return {\r\n                value: input,\r\n                text: input\r\n            }\r\n        }\r\n    });\r\n\r\n    //Refocus markdown editor after closing document list modal\r\n    $('#documentList').on('hidden.bs.modal', function(e) {\r\n        $('[name=\"markdowneditor\"]').focus();\r\n    });\r\n\r\n    //Toolbar shortcut function\r\n    $('.markdown-shortcut').click(function() {\r\n\r\n        //Textarea element\r\n        var el = $('[name=\"markdowneditor\"]');\r\n\r\n        //Get current caret position in textarea\r\n        var caretPosition = el.getCursorPosition();\r\n\r\n        //Define data to be inject\r\n        var toBeInject = $(this).attr('data-inject');\r\n        var options = $(this).attr('data-options');\r\n\r\n        //Options : Erase textarea\r\n        if(options == 'DELETE') {\r\n            var text = \"\";\r\n            var caretFocusPosition = 0;\r\n\r\n            //Update latest value to textarea, assign new caret position and focus the textarea auto\r\n            el.val(text).selectRange(caretFocusPosition).focus();\r\n\r\n            //Update the textarea size\r\n            autosize.update(el);\r\n        }\r\n        //Options : Generate links\r\n        else if(options == 'LINKS') {\r\n\r\n            //Will be change to using default modal\r\n            bootbox.dialog({\r\n                title: 'Perkataan dan URL',\r\n                message: '<div class=\"form-group\"><input type=\"text\" name=\"linkPerkataan\" class=\"form-control input-sm\" placeholder=\"Perkataan\" /></div>' +\r\n                '<div class=\"form-group\"><input type=\"text\" name=\"linkUrl\" class=\"form-control input-sm\" placeholder=\"URL\" /></div>',\r\n                buttons: {\r\n                    primary: {\r\n                        label: 'Cipta',\r\n                        className: 'btn-primary btn-sm',\r\n                        callback: function() {\r\n                            //Generate the injector string to the textarea value\r\n                            var text = el.val().substring(0, caretPosition) + '[' + $('[name=\"linkPerkataan\"]').val() + '](http://' + $('[name=\"linkUrl\"]').val() + '/)' + el.val().substring(caretPosition);\r\n\r\n                            //Update latest value to textarea, assign new caret position and focus the textarea auto\r\n                            el.val(text).selectRange(caretPosition).focus();\r\n\r\n                            //Update the textarea size\r\n                            autosize.update(el);\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n\r\n        }\r\n        //Options : Document selector\r\n        else if(options == 'DOKUMEN') {\r\n\r\n            //Show the modal\r\n            $('#documentList').modal('show');\r\n\r\n            //Query to server list of files\r\n            $.ajax({\r\n                url: $(this).attr('data-loadURL'),\r\n                method: 'GET',\r\n                success: function(data) {\r\n\r\n                    var injectDocumentList = '';\r\n                    var index;\r\n\r\n                    //Generate the HTML\r\n                    for(index = 0; index < data.length; index++) {\r\n\r\n                        if(index % 6 == 0)\r\n                            injectDocumentList = injectDocumentList + '<div class=\"row\" style=\"display: flex; \">'\r\n\r\n                        injectDocumentList = injectDocumentList + '<div class=\"col-xs-2\">' +\r\n                        '<a href=\"' + data[index] + '\" data-lightbox=\"documents\">' +\r\n                        '<img src=\"' + data[index] + '\" class=\"img-responsive img-thumbnail\" style=\"display: block;margin-left: auto;margin-right: auto;\" />' +\r\n                        '</a>' +\r\n                        '<hr />' +\r\n                        '<div style=\"position: absolute; bottom: 0; left: 15px; width: 91%;\">' +\r\n                        '<button type=\"button\" class=\"btn btn-success btn-xs btn-block selectThisImage\" data-dismiss=\"modal\" data-imageUrl=\"' + data[index] + '\">' +\r\n                        '<i class=\"fa fa-check fa-fw\"></i>' +\r\n                        '</button>' +\r\n                        '</div>' +\r\n                        '</div>';\r\n\r\n                        if(index % 6 == 5)\r\n                            injectDocumentList = injectDocumentList + '</div><hr />';\r\n\r\n                    }\r\n\r\n                    if(index % 6 != 5) {\r\n                        injectDocumentList = injectDocumentList + '</div>';\r\n                    }\r\n\r\n                    //Inject HTML code to modal body\r\n                    $('#senaraiDokumen').html(injectDocumentList);\r\n\r\n                    //When click image selector button\r\n                    $('.selectThisImage').click(function() {\r\n\r\n                        //Generate the injector string to the textarea value\r\n                        var text = el.val().substring(0, caretPosition) + '![](' + $(this).attr('data-imageUrl') + ')' + el.val().substring(caretPosition);\r\n\r\n                        //Update latest value to textarea, assign new caret position and focus the textarea auto\r\n                        el.val(text).selectRange(caretPosition + 2);\r\n\r\n                        //Update the textarea size\r\n                        autosize.update(el);\r\n                    });\r\n\r\n                }\r\n            });\r\n        }\r\n        //Defaults\r\n        else {\r\n            //Define after caret position\r\n            var caretFocusPosition = parseInt(caretPosition) + parseInt((toBeInject.search(/CPST/g) == -1)? 0 : toBeInject.search(/CPST/g));\r\n\r\n            //Replace caret position tracker from injector string, convert , to new line, convert ~ to tabs\r\n            toBeInject = toBeInject.replace('CPST', '').replace(/,/g, \"\\r\\n\").replace(/~/g, \"\\t\");\r\n\r\n            //Generate the injector string to the textarea value\r\n            var text = el.val().substring(0, caretPosition) + toBeInject + el.val().substring(caretPosition);\r\n\r\n            //Update latest value to textarea, assign new caret position and focus the textarea auto\r\n            el.val(text).selectRange(caretFocusPosition).focus();\r\n\r\n            //Update the textarea size\r\n            autosize.update(el);\r\n        }\r\n    });\r\n\r\n    //When tab was press, Prevent any default action\r\n    $('[name=\"markdowneditor\"]').keydown(function(e) {\r\n        if(e.keyCode === 9) { // tab was pressed\r\n            //Get caret position/selection\r\n            var start = this.selectionStart;\r\n            var end = this.selectionEnd;\r\n\r\n            var $this = $(this);\r\n            var value = $this.val();\r\n\r\n            //Set textarea value to: text before caret + tab + text after caret\r\n            $this.val(value.substring(0, start) + \"\\t\" + value.substring(end));\r\n\r\n            // put caret at right position again (add one for the tab)\r\n            this.selectionStart = this.selectionEnd = start + 1;\r\n\r\n            // prevent the focus lose\r\n            e.preventDefault();\r\n        }\r\n    });\r\n\r\n    //Publish or unpublish checkbox\r\n    $('.publishing').click(function() {\r\n        if($('[name=\"is_publish\"]').val() == 1) {\r\n            $('[name=\"is_publish\"]').val(0);\r\n            $(this).removeClass('fa-check-square-o').addClass('fa-square-o');\r\n        }\r\n        else {\r\n            $('[name=\"is_publish\"]').val(1);\r\n            $(this).removeClass('fa-square-o').addClass('fa-check-square-o');\r\n        }\r\n    });\r\n\r\n    $('.imageButtonSelector').click(function() {\r\n\r\n        //Show the modal\r\n        $('#imageSelector').modal('show');\r\n\r\n        //Query to server list of files\r\n        $.ajax({\r\n            url: $(this).attr('data-loadURL'),\r\n            method: 'GET',\r\n            success: function(data) {\r\n\r\n                var injectDocumentList = '';\r\n                var index;\r\n\r\n                //Generate the HTML\r\n                for(index = 0; index < data.length; index++) {\r\n\r\n                    if(index % 6 == 0)\r\n                        injectDocumentList = injectDocumentList + '<div class=\"row\" style=\"display: flex; \">'\r\n\r\n                    injectDocumentList = injectDocumentList + '<div class=\"col-xs-2\">' +\r\n                    '<a href=\"' + data[index] + '\" data-lightbox=\"documents\">' +\r\n                    '<img src=\"' + data[index] + '\" class=\"img-responsive img-thumbnail\" style=\"display: block;margin-left: auto;margin-right: auto;\" />' +\r\n                    '</a>' +\r\n                    '<hr />' +\r\n                    '<div style=\"position: absolute; bottom: 0; left: 15px; width: 91%;\">' +\r\n                    '<button type=\"button\" class=\"btn btn-success btn-xs btn-block assignAsThumbnail\" data-dismiss=\"modal\" data-imageUrl=\"' + data[index] + '\">' +\r\n                    '<i class=\"fa fa-check fa-fw\"></i>' +\r\n                    '</button>' +\r\n                    '</div>' +\r\n                    '</div>';\r\n\r\n                    if(index % 6 == 5)\r\n                        injectDocumentList = injectDocumentList + '</div><hr />';\r\n\r\n                }\r\n\r\n                if(index % 6 != 5) {\r\n                    injectDocumentList = injectDocumentList + '</div>';\r\n                }\r\n\r\n                //Inject HTML code to modal body\r\n                $('#pilihangambar').html(injectDocumentList);\r\n\r\n                //When click image selector button\r\n                $('.assignAsThumbnail').click(function() {\r\n                    $('#thumbnail').attr('src', $(this).attr('data-imageUrl'))\r\n                    $('[name=\"images\"]').val($(this).attr('data-imageUrl'));\r\n                });\r\n\r\n            }\r\n        });\r\n\r\n    });\r\n\r\n});\r\n\r\n//Delete?\r\n$('[data-dpp-action=\"trash\"]').click(function() {\r\n    $('[name=\"_method\"]').val('DELETE');\r\n    $('[name=\"articlesform\"]').submit();\r\n});\r\n\r\n//Update markdown preview content\r\nvar updateMarkdown = function() {\r\n    $('#preview_markdown').html(marked($('[name=\"markdowneditor\"]').val()));\r\n    Prism.highlightElement($('#preview_markdown')[0]);\r\n};"],"sourceRoot":"/source/"}