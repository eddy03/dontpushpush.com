$(document).ready(function(){$(".topnavigation li:first").addClass("active"),$('[data-toggle="tooltip"]').tooltip(),$(".preview-button").tooltip(),autosize($('[name="markdowneditor"]')),$('[name="tags"]').selectize({delimiter:",",persist:!1,create:function(a){return{value:a,text:a}}}),$("#documentList").on("hidden.bs.modal",function(a){$('[name="markdowneditor"]').focus()}),$(".markdown-shortcut").click(function(){var a=$('[name="markdowneditor"]'),t=a.getCursorPosition(),s=$(this).attr("data-inject"),e=$(this).attr("data-options");if("DELETE"==e){var i="",l=0;a.val(i).selectRange(l).focus(),autosize.update(a)}else if("LINKS"==e)bootbox.dialog({title:"Perkataan dan URL",message:'<div class="form-group"><input type="text" name="linkPerkataan" class="form-control input-sm" placeholder="Perkataan" /></div><div class="form-group"><input type="text" name="linkUrl" class="form-control input-sm" placeholder="URL" /></div>',buttons:{primary:{label:"Cipta",className:"btn-primary btn-sm",callback:function(){var s=a.val().substring(0,t)+"["+$('[name="linkPerkataan"]').val()+"](http://"+$('[name="linkUrl"]').val()+"/)"+a.val().substring(t);a.val(s).selectRange(t).focus(),autosize.update(a)}}}});else if("DOKUMEN"==e)$("#documentList").modal("show"),$.ajax({url:$(this).attr("data-loadURL"),method:"GET",success:function(s){var e,i="";for(e=0;e<s.length;e++)e%6==0&&(i+='<div class="row" style="display: flex; ">'),i=i+'<div class="col-xs-2"><a href="'+s[e]+'" data-lightbox="documents"><img src="'+s[e]+'" class="img-responsive img-thumbnail" style="display: block;margin-left: auto;margin-right: auto;" /></a><hr /><div style="position: absolute; bottom: 0; left: 15px; width: 91%;"><button type="button" class="btn btn-success btn-xs btn-block selectThisImage" data-dismiss="modal" data-imageUrl="'+s[e]+'"><i class="fa fa-check fa-fw"></i></button></div></div>',e%6==5&&(i+="</div><hr />");e%6!=5&&(i+="</div>"),$("#senaraiDokumen").html(i),$(".selectThisImage").click(function(){var s=a.val().substring(0,t)+"![]("+$(this).attr("data-imageUrl")+")"+a.val().substring(t);a.val(s).selectRange(t+2),autosize.update(a)})}});else{var l=parseInt(t)+parseInt(-1==s.search(/CPST/g)?0:s.search(/CPST/g));s=s.replace("CPST","").replace(/,/g,"\r\n").replace(/~/g,"	");var i=a.val().substring(0,t)+s+a.val().substring(t);a.val(i).selectRange(l).focus(),autosize.update(a)}}),$('[name="markdowneditor"]').keydown(function(a){if(9===a.keyCode){var t=this.selectionStart,s=this.selectionEnd,e=$(this),i=e.val();e.val(i.substring(0,t)+"	"+i.substring(s)),this.selectionStart=this.selectionEnd=t+1,a.preventDefault()}}),$(".publishing").click(function(){1==$('[name="is_publish"]').val()?($('[name="is_publish"]').val(0),$(this).removeClass("fa-check-square-o").addClass("fa-square-o")):($('[name="is_publish"]').val(1),$(this).removeClass("fa-square-o").addClass("fa-check-square-o"))}),$(".imageButtonSelector").click(function(){$("#imageSelector").modal("show"),$.ajax({url:$(this).attr("data-loadURL"),method:"GET",success:function(a){var t,s="";for(t=0;t<a.length;t++)t%6==0&&(s+='<div class="row" style="display: flex; ">'),s=s+'<div class="col-xs-2"><a href="'+a[t]+'" data-lightbox="documents"><img src="'+a[t]+'" class="img-responsive img-thumbnail" style="display: block;margin-left: auto;margin-right: auto;" /></a><hr /><div style="position: absolute; bottom: 0; left: 15px; width: 91%;"><button type="button" class="btn btn-success btn-xs btn-block assignAsThumbnail" data-dismiss="modal" data-imageUrl="'+a[t]+'"><i class="fa fa-check fa-fw"></i></button></div></div>',t%6==5&&(s+="</div><hr />");t%6!=5&&(s+="</div>"),$("#pilihangambar").html(s),$(".assignAsThumbnail").click(function(){$("#thumbnail").attr("src",$(this).attr("data-imageUrl")),$('[name="images"]').val($(this).attr("data-imageUrl"))})}})})}),$('[data-dpp-action="trash"]').click(function(){$('[name="_method"]').val("DELETE"),$('[name="articlesform"]').submit()});var updateMarkdown=function(){$("#preview_markdown").html(marked($('[name="markdowneditor"]').val())),Prism.highlightElement($("#preview_markdown")[0])};